<scroll fullscreen>
    <scrolling>
        <article>
            <section uuid=config>
                <h2>配置文件</h2>
                <p>config.js 是模块目录下的必要文件，起到模块注册和模块配置的作用</p>
                <scroll class=exp stop-propagation="auto" x=auto y=false>
                    <scrolling style="min-width:{setting.articleWidth}dp">
                        <table>
                            <thead>
                                <tr>
                                    <th>&nbsp;主要配置项</th>
                                    <th>描述</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><a transform=docs-module-resources>resources</a></td>
                                    <td>资源库配置</td>
                                </tr>
                                <tr>
                                    <td><a transform=docs-module-config>config</a></td>
                                    <td>基本特性配置</td>
                                </tr>
                                <tr>
                                    <td><a transform=docs-module-resources>events</a></td>
                                    <td>模块载入的事件触发</td>
                                </tr>
                                <tr>
                                    <td><a transform=docs-module-resources>param</a></td>
                                    <td>模块默认参数配置</td>
                                </tr>
                                <tr>
                                    <td><a transform=docs-module-resources>controller</a></td>
                                    <td>数据源的操作配置</td>
                                </tr>
                                <tr>
                                    <td><a transform=docs-module-resources>helper</a></td>
                                    <td>模版数据输出辅助函数</td>
                                </tr>
                            </tbody>
                        </table>
                    </scrolling>
                </scroll>
                <p>一个标准的模块配置<code>config.js</code>文件</p>
                <code-highlight type=js>
                    export default {
                        // 模块的资源库（对内／对外）
                        resources: {
                            // js 资源
                            script: {
                                main: "main.js"
                            },
                            // 模版资源
                            source: {
                                index: "index.html",
                                footer: "frameworks::footer"
                            },
                            // css 资源
                            style: {
                                common: "frameworks::common",
                                main: "frameworks::docs",
                                style: "css/main.css"
                            },
                            // 数据资源
                            data: { 
                                list: "./list.json",
                                // 远程数据地址，并且配置参数，参数从模块参数配置中解析
                                user: "http://api.ioing.com/getUser|@param(id:id)"
                            }
                        },
                        // 关于模块特性的配置
                        config : {
                            // 模块的层级
                            level: 0,
                            // 模块是否是独立模块
                            absolute: false,
                            // 模块需要加载的样式
                            style: ["common", "main", "style"],
                            // 模块需要加载的脚本
                            script: ["main"],
                            // 模块需要加载的模版
                            source: ["index", "footer"],
                            // 是否沙箱
                            sandbox: true,
                            // 是否是shadow dom
                            shadowbox: false,
                            // 模块 cache 生命周期
                            cache: 360,
                            // 数据源过期超时
                            timeout: 60,
                            // 引用数据源
                            data: ["list"],
                            // 创建镜像模块
                            mirroring: {
                                // 裁剪镜像视图
                                clip: [60, 0, 60, 0],
                                // 裁剪部分增加滤镜
                                filter: "blur(20px)"
                            },
                            // 启用动画
                            animation: true
                        },
                        // 数据源操作
                        controller: {
                            "list": function () {
                                // TO-DO
                            }
                        },
                        events: {
                            // 模块开始转场事件
                            transformstart: function () {
                                // TO-DO
                            },
                            // 模块转场结束事件
                            transformsend: function () {
                                // TO-DO
                            },
                            // 模块加载前事件
                            preload: function (data) {
                                // TO-DO
                            },
                            // 模块加载完毕事件
                            load: function (data) {
                                // TO-DO
                            },
                        },
                        // 数据输出辅助函数
                        helper: {
                            decode: function (res) {
                                return decodeURIComponent(res)
                            }
                        }
                        // 数据源默认参数
                        param: {
                            id: 100
                        }
                    }
                </code-highlight>
                <p>配置文件用以描述模块的基本特性和资源库，比如模块的运行模式、转场动画、生命周期等</p>
                <blockquote>
                    以上配置为一个完整的基本模块配置例子，这些配置在接下来的教程中会一一涉及
                </blockquote>
            </section>

            <include footer></include>
        </article>
    </scrolling>
</scroll>

<script name=event>
    function viewModule (type) {
        if ( type == 0 ) {
            var view = App.modules.frameworks.elements.mask
        } else {
            var view = App.modules[App.id].elements.mask
        }

        view.style.opacity = 0

        setTimeout(function () {
            view.style.opacity = ''
        }, 400)
    }
</script>